import { useState, useEffect } from "react";
import { network, Network } from "vis-network";

const Vis = () => {
  var options = {
    nodes: {
      color: "grey",
      font: { color: "white" },
    },
    edges: {
      color: { highlight: "green", color: "darkred" },
    },
    physics: {
      enabled: true,
    },
    interaction: {
      multiselect: true,
      selectable: true,
    },

    layout: {
      randomSeed: 1,
    },
  };

  const [nodes, setNodes] = useState([]);
  const [edges, setEdges] = useState([]);
  let temp_nodes = [];
  let temp_edges = [];
  const onLoad = () => {
    temp_nodes.push({
      id: "main",
      label: "GitHub C2",
      shape: "circularImage",
      image: "/images/github_logo.png",
      color: "green",
    });

    for (let i = 0; i < 5; i++) {
      temp_nodes.push({
        id: i,
        label: "Node " + i,
        shape: "dot",
      });

      temp_edges.push({
        from: "main",
        to: i,
      });
    }

    setEdges(temp_edges);
    setNodes(temp_nodes);
  };
  var data = {
    nodes: nodes,
    edges: edges,
  };

  useEffect(() => {
    onLoad();
  }, []);

  useEffect(() => {
    let container = document.getElementById("canvasEl");
    console.log(data);
    var network = new Network(container, data, options);
    network.focus("main", {
      scale: 1.0,
      offset: { x: 0, y: 0 },
      animation: {
        duration: 650,
        easingFunction: "linear",
      },
    });
  }, [data]);
  return (
    <>
      <div id="canvasEl" className=""></div>
    </>
  );
};

export default Vis;
